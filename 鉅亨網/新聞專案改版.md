## Monorepo
```sh
npx create-nx-workspace@latest
--preset=next
--packageManager=pnpm
```
* [create-nx-workspace](https://nx.dev/packages/nx/documents/create-nx-workspace)
```
- workspace
	- apps
	- libs
	- tools
```
* 新增專案到apps
```sh
pnpm nx g @nx/next:app fe-news-nextjs
```
* 新增專案到libs
```
pnpm nx g @nx/react:lib fe-common
```
* 新增元件到libs專案下
```
pnpm nx g @nx/react:component header --project=fe-common
```
* 移除專案
```
pnpm nx g rm fe-news-nextjs-e2e
pnpm nx g rm fe-news-nextjs
```

## CSS Library
* [callstack/linaria: Zero-runtime CSS in JS library](https://github.com/callstack/linaria)
```sh
pnpm install next-with-linaria @linaria/babel-preset @linaria/core @linaria/react
```
* [next-with-linaria](https://github.com/dlehmhus/next-with-linaria)
```ts
const withLinaria = require('next-with-linaria');
const plugins = [
  withNx,
  withLinaria,
];
```
* 語法
```ts
import { styled } from 'linaria/react';
import { css } from 'linaria';
```
```html
<span
  className={css`
	color: red;
  `}
>
  Hello there
</span>
```

## 開發
* 可執行的指令定義在project.json
* dev
```sh
pnpm nx serve fe-news --hostname=0.0.0.0
```

## 其他

* 打開全部專案關係圖
```
yarn nx graph
```

## Reference
* Package Manager 
	* [Fast, disk space efficient package manager | pnpm](https://pnpm.io/)
* Monorepo
	* [Package-Based Monorepo | Nx](https://nx.dev/tutorials/package-based-repo-tutorial)
	* [Pnpm and Nx monorepo. Part 1 | Javier Brea](https://www.javierbrea.com/blog/pnpm-nx-monorepo-01/)
	* [Create a Shared React Library in an Nx Workspace | egghead.io](https://egghead.io/lessons/react-create-a-shared-react-library-in-an-nx-workspace)
		* 新增一個ui library
		* `tsconfig.base.json`
			* "experimentalDecorators": true
